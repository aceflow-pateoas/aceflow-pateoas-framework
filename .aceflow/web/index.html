<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AceFlow v2.0 - AIé©±åŠ¨çš„æ•æ·å¼€å‘å·¥ä½œæµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card h3 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
        }

        .card h3 .icon {
            margin-right: 8px;
            font-size: 1.2em;
        }

        .project-info {
            grid-column: 1 / -1;
        }

        .project-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .status-item {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .status-item h4 {
            color: #2d3748;
            margin-bottom: 5px;
        }

        .status-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .flow-modes {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .mode-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .mode-card.active {
            border-color: #667eea;
            background: #eef2ff;
        }

        .mode-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .mode-desc {
            font-size: 0.9em;
            color: #718096;
        }

        .stages-flow {
            margin: 20px 0;
        }

        .stages-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 15px 0;
        }

        .stage {
            flex: 1;
            max-width: 120px;
            text-align: center;
            position: relative;
        }

        .stage-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.1em;
        }

        .stage-circle.completed {
            background: #48bb78;
        }

        .stage-circle.in-progress {
            background: #ed8936;
        }

        .stage-circle.pending {
            background: #a0aec0;
        }

        .stage-name {
            font-size: 0.9em;
            color: #4a5568;
            font-weight: 500;
        }

        .stage-arrow {
            color: #a0aec0;
            font-size: 1.5em;
            margin: 0 10px;
        }

        .actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .ai-suggestions {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: none;
        }

        .suggestions-list {
            list-style: none;
            margin-top: 15px;
        }

        .suggestions-list li {
            background: rgba(255, 255, 255, 0.7);
            margin: 8px 0;
            padding: 10px;
            border-radius: 6px;
            border-left: 4px solid #f6ad55;
        }

        .memory-pool {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
            border: none;
        }

        .memory-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .memory-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }

        .memory-count {
            font-size: 1.5em;
            font-weight: bold;
            color: #805ad5;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .flow-modes {
                grid-template-columns: 1fr;
            }
            
            .stages-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .stage-arrow {
                transform: rotate(90deg);
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸš€ AceFlow v2.0</h1>
            <p>AIé©±åŠ¨çš„æ•æ·å¼€å‘å·¥ä½œæµæ¡†æ¶</p>
        </header>

        <div class="dashboard">
            <!-- é¡¹ç›®æ¦‚è§ˆ -->
            <div class="card project-info">
                <h3><span class="icon">ğŸ“</span>é¡¹ç›®æ¦‚è§ˆ</h3>
                <div class="project-status">
                    <div class="status-item">
                        <h4>é¡¹ç›®åç§°</h4>
                        <div class="status-value" id="project-name">aceflow-pateoas-framework</div>
                    </div>
                    <div class="status-item">
                        <h4>æµç¨‹æ¨¡å¼</h4>
                        <div class="status-value" id="flow-mode">è½»é‡çº§</div>
                    </div>
                    <div class="status-item">
                        <h4>å½“å‰é˜¶æ®µ</h4>
                        <div class="status-value" id="current-stage">æœªå¼€å§‹</div>
                    </div>
                    <div class="status-item">
                        <h4>æ•´ä½“è¿›åº¦</h4>
                        <div class="status-value" id="overall-progress">0%</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <!-- æµç¨‹æ¨¡å¼é€‰æ‹© -->
            <div class="card">
                <h3><span class="icon">âš™ï¸</span>æµç¨‹æ¨¡å¼</h3>
                <div class="flow-modes">
                    <div class="mode-card active" data-mode="minimal">
                        <div class="mode-title">è½»é‡çº§</div>
                        <div class="mode-desc">Pâ†’Dâ†’R<br>2-7å¤©</div>
                    </div>
                    <div class="mode-card" data-mode="standard">
                        <div class="mode-title">æ ‡å‡†</div>
                        <div class="mode-desc">P1â†’P2â†’D1â†’D2â†’R1<br>1-2å‘¨</div>
                    </div>
                    <div class="mode-card" data-mode="complete">
                        <div class="mode-title">å®Œæ•´</div>
                        <div class="mode-desc">S1â†’...â†’S8<br>2-4å‘¨</div>
                    </div>
                </div>
                <div class="actions">
                    <button class="btn btn-primary" onclick="switchMode()">
                        <span>ğŸ”„</span>åˆ‡æ¢æ¨¡å¼
                    </button>
                </div>
            </div>

            <!-- é˜¶æ®µæµç¨‹ -->
            <div class="card">
                <h3><span class="icon">ğŸ¯</span>é˜¶æ®µæµç¨‹</h3>
                <div class="stages-flow">
                    <div class="stages-container" id="stages-container">
                        <!-- åŠ¨æ€ç”Ÿæˆé˜¶æ®µ -->
                    </div>
                </div>
                <div class="actions">
                    <button class="btn btn-primary" onclick="startStage()">
                        <span>ğŸš€</span>å¼€å§‹é˜¶æ®µ
                    </button>
                    <button class="btn btn-secondary" onclick="updateProgress()">
                        <span>ğŸ“ˆ</span>æ›´æ–°è¿›åº¦
                    </button>
                    <button class="btn btn-secondary" onclick="completeStage()">
                        <span>âœ…</span>å®Œæˆé˜¶æ®µ
                    </button>
                </div>
            </div>

            <!-- AIå»ºè®® -->
            <div class="card ai-suggestions">
                <h3><span class="icon">ğŸ¤–</span>AIæ™ºèƒ½å»ºè®®</h3>
                <ul class="suggestions-list" id="ai-suggestions">
                    <li>ğŸ’¡ æ¨èä½¿ç”¨è½»é‡çº§æ¨¡å¼ï¼Œé€‚åˆå½“å‰é¡¹ç›®è§„æ¨¡</li>
                    <li>ğŸ¯ å»ºè®®ä»è§„åˆ’é˜¶æ®µå¼€å§‹ï¼Œæ˜ç¡®æ ¸å¿ƒéœ€æ±‚</li>
                    <li>âš¡ å¯ä»¥å¯ç”¨æ•æ·é›†æˆï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡</li>
                </ul>
                <div class="actions">
                    <button class="btn btn-primary" onclick="getAIAdvice()">
                        <span>ğŸ§ </span>è·å–å»ºè®®
                    </button>
                </div>
            </div>

            <!-- è®°å¿†ä¸­å¿ƒ -->
            <div class="card memory-pool">
                <h3><span class="icon">ğŸ§ </span>è®°å¿†ä¸­å¿ƒ</h3>
                <div class="memory-items">
                    <div class="memory-item">
                        <div class="memory-count">0</div>
                        <div>éœ€æ±‚è®°å¿†</div>
                    </div>
                    <div class="memory-item">
                        <div class="memory-count">0</div>
                        <div>æŠ€æœ¯å†³ç­–</div>
                    </div>
                    <div class="memory-item">
                        <div class="memory-count">0</div>
                        <div>é—®é¢˜è®°å½•</div>
                    </div>
                    <div class="memory-item">
                        <div class="memory-count">0</div>
                        <div>ç”¨æˆ·åé¦ˆ</div>
                    </div>
                </div>
                <div class="actions">
                    <button class="btn btn-primary" onclick="openMemoryCenter()">
                        <span>ğŸ”</span>æµè§ˆè®°å¿†
                    </button>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>AceFlow v2.0 - è®©AIèµ‹èƒ½ä½ çš„æ•æ·å¼€å‘æµç¨‹ ğŸ‰</p>
        </footer>
    </div>

    <script>
        // æµç¨‹æ¨¡å¼é…ç½®
        const flowModes = {
            minimal: {
                name: 'è½»é‡çº§',
                stages: ['P', 'D', 'R'],
                stageNames: { P: 'è§„åˆ’', D: 'å¼€å‘', R: 'è¯„å®¡' }
            },
            standard: {
                name: 'æ ‡å‡†',
                stages: ['P1', 'P2', 'D1', 'D2', 'R1'],
                stageNames: { P1: 'éœ€æ±‚', P2: 'è§„åˆ’', D1: 'å®ç°', D2: 'æµ‹è¯•', R1: 'è¯„å®¡' }
            },
            complete: {
                name: 'å®Œæ•´',
                stages: ['S1', 'S2', 'S3', 'S4', 'S5', 'S6', 'S7', 'S8'],
                stageNames: { 
                    S1: 'ç”¨æˆ·æ•…äº‹', S2: 'ä»»åŠ¡æ‹†åˆ†', S3: 'æµ‹è¯•ç”¨ä¾‹', S4: 'åŠŸèƒ½å®ç°',
                    S5: 'æµ‹è¯•æ‰§è¡Œ', S6: 'ä»£ç è¯„å®¡', S7: 'æ¼”ç¤ºåé¦ˆ', S8: 'æ€»ç»“å½’æ¡£'
                }
            }
        };

        let currentMode = 'minimal';
        let currentStage = null;
        let stageStates = {};

        // åˆå§‹åŒ–é¡µé¢
        function init() {
            loadProjectState();
            updateModeSelection();
            renderStages();
        }

        // åŠ è½½é¡¹ç›®çŠ¶æ€
        function loadProjectState() {
            // è¿™é‡Œåº”è¯¥ä»åç«¯APIåŠ è½½çŠ¶æ€
            // æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
            const mockState = {
                project_name: 'aceflow-pateoas-framework',
                flow_mode: 'minimal',
                current_stage: null,
                overall_progress: 0,
                stage_states: {}
            };

            document.getElementById('project-name').textContent = mockState.project_name;
            document.getElementById('flow-mode').textContent = flowModes[mockState.flow_mode].name;
            document.getElementById('current-stage').textContent = mockState.current_stage || 'æœªå¼€å§‹';
            document.getElementById('overall-progress').textContent = mockState.overall_progress + '%';
            document.getElementById('progress-fill').style.width = mockState.overall_progress + '%';

            currentMode = mockState.flow_mode;
            currentStage = mockState.current_stage;
            stageStates = mockState.stage_states;
        }

        // æ›´æ–°æ¨¡å¼é€‰æ‹©
        function updateModeSelection() {
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
                if (card.dataset.mode === currentMode) {
                    card.classList.add('active');
                }
            });
        }

        // æ¸²æŸ“é˜¶æ®µæµç¨‹
        function renderStages() {
            const container = document.getElementById('stages-container');
            const mode = flowModes[currentMode];
            
            container.innerHTML = '';
            
            mode.stages.forEach((stage, index) => {
                // é˜¶æ®µåœ†åœˆ
                const stageDiv = document.createElement('div');
                stageDiv.className = 'stage';
                
                const circle = document.createElement('div');
                circle.className = 'stage-circle';
                
                // ç¡®å®šé˜¶æ®µçŠ¶æ€
                let status = 'pending';
                if (stageStates[stage]) {
                    status = stageStates[stage].status;
                } else if (stage === currentStage) {
                    status = 'in-progress';
                }
                
                circle.classList.add(status);
                circle.textContent = stage;
                
                const name = document.createElement('div');
                name.className = 'stage-name';
                name.textContent = mode.stageNames[stage];
                
                stageDiv.appendChild(circle);
                stageDiv.appendChild(name);
                container.appendChild(stageDiv);
                
                // æ·»åŠ ç®­å¤´ï¼ˆé™¤äº†æœ€åä¸€ä¸ªé˜¶æ®µï¼‰
                if (index < mode.stages.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'stage-arrow';
                    arrow.textContent = 'â†’';
                    container.appendChild(arrow);
                }
            });
        }

        // æ¨¡å¼å¡ç‰‡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.mode-card').forEach(card => {
            card.addEventListener('click', () => {
                currentMode = card.dataset.mode;
                updateModeSelection();
                renderStages();
                document.getElementById('flow-mode').textContent = flowModes[currentMode].name;
            });
        });

        // åˆ‡æ¢æ¨¡å¼
        function switchMode() {
            alert('æ¨¡å¼åˆ‡æ¢åŠŸèƒ½å¼€å‘ä¸­...\nå°†æ”¯æŒæ™ºèƒ½æ•°æ®è¿ç§»å’Œè¿›åº¦ä¿ç•™');
        }

        // å¼€å§‹é˜¶æ®µ
        function startStage() {
            if (!currentStage) {
                const firstStage = flowModes[currentMode].stages[0];
                currentStage = firstStage;
                stageStates[firstStage] = { status: 'in-progress', progress: 0 };
                
                document.getElementById('current-stage').textContent = currentStage;
                renderStages();
                
                alert(`ğŸš€ å·²å¼€å§‹é˜¶æ®µ: ${currentStage} - ${flowModes[currentMode].stageNames[currentStage]}`);
            } else {
                alert(`å½“å‰å·²æœ‰æ´»è·ƒé˜¶æ®µ: ${currentStage}`);
            }
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            if (!currentStage) {
                alert('âŒ æ²¡æœ‰æ´»è·ƒçš„é˜¶æ®µ');
                return;
            }
            
            const progress = prompt('è¯·è¾“å…¥å½“å‰é˜¶æ®µè¿›åº¦ (0-100):', '50');
            if (progress !== null && !isNaN(progress)) {
                const progressNum = Math.max(0, Math.min(100, parseInt(progress)));
                stageStates[currentStage].progress = progressNum;
                
                // æ›´æ–°æ•´ä½“è¿›åº¦
                updateOverallProgress();
                
                alert(`ğŸ“ˆ é˜¶æ®µ ${currentStage} è¿›åº¦æ›´æ–°ä¸º ${progressNum}%`);
            }
        }

        // å®Œæˆé˜¶æ®µ
        function completeStage() {
            if (!currentStage) {
                alert('âŒ æ²¡æœ‰æ´»è·ƒçš„é˜¶æ®µ');
                return;
            }
            
            stageStates[currentStage].status = 'completed';
            stageStates[currentStage].progress = 100;
            
            // åˆ‡æ¢åˆ°ä¸‹ä¸€é˜¶æ®µ
            const stages = flowModes[currentMode].stages;
            const currentIndex = stages.indexOf(currentStage);
            
            if (currentIndex < stages.length - 1) {
                const nextStage = stages[currentIndex + 1];
                currentStage = nextStage;
                stageStates[nextStage] = { status: 'in-progress', progress: 0 };
                
                document.getElementById('current-stage').textContent = currentStage;
                alert(`ğŸ‰ é˜¶æ®µå®Œæˆï¼è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€é˜¶æ®µ: ${nextStage}`);
            } else {
                currentStage = null;
                document.getElementById('current-stage').textContent = 'å·²å®Œæˆ';
                alert('ğŸŠ æ‰€æœ‰é˜¶æ®µå·²å®Œæˆï¼');
            }
            
            updateOverallProgress();
            renderStages();
        }

        // æ›´æ–°æ•´ä½“è¿›åº¦
        function updateOverallProgress() {
            const stages = flowModes[currentMode].stages;
            let totalProgress = 0;
            
            stages.forEach(stage => {
                if (stageStates[stage]) {
                    totalProgress += stageStates[stage].progress || 0;
                }
            });
            
            const overallProgress = Math.round(totalProgress / stages.length);
            document.getElementById('overall-progress').textContent = overallProgress + '%';
            document.getElementById('progress-fill').style.width = overallProgress + '%';
        }

        // è·å–AIå»ºè®®
        function getAIAdvice() {
            const suggestions = [
                'ğŸ’¡ å½“å‰é˜¶æ®µå»ºè®®ï¼šä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½å®ç°ï¼Œé¿å…è¿‡åº¦è®¾è®¡',
                'âš¡ æ€§èƒ½ä¼˜åŒ–ï¼šå»ºè®®åœ¨å¼€å‘é˜¶æ®µåŒæ­¥è¿›è¡Œå•å…ƒæµ‹è¯•',
                'ğŸ¯ ç”¨æˆ·ä½“éªŒï¼šå»ºè®®æ·»åŠ ç”¨æˆ·åé¦ˆæ”¶é›†æœºåˆ¶',
                'ğŸ”§ æŠ€æœ¯å€ºåŠ¡ï¼šæ£€æµ‹åˆ°éƒ¨åˆ†ä»£ç å¯ä»¥é‡æ„ä¼˜åŒ–',
                'ğŸ“ˆ è¿›åº¦ç®¡ç†ï¼šå½“å‰è¿›åº¦è‰¯å¥½ï¼Œå»ºè®®ä¿æŒå¼€å‘èŠ‚å¥'
            ];
            
            const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
            
            const suggestionsList = document.getElementById('ai-suggestions');
            const newSuggestion = document.createElement('li');
            newSuggestion.textContent = randomSuggestion;
            suggestionsList.appendChild(newSuggestion);
            
            // ä¿æŒæœ€å¤š5æ¡å»ºè®®
            if (suggestionsList.children.length > 5) {
                suggestionsList.removeChild(suggestionsList.firstChild);
            }
        }

        // æ‰“å¼€è®°å¿†ä¸­å¿ƒ
        function openMemoryCenter() {
            alert('ğŸ“š è®°å¿†ä¸­å¿ƒåŠŸèƒ½å¼€å‘ä¸­...\nå°†æ”¯æŒæ™ºèƒ½çŸ¥è¯†æ£€ç´¢å’Œé¡¹ç›®ç»éªŒç§¯ç´¯');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>